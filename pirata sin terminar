#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main() {
    int i;
    int l;
    int j;
    int n;
    int s;
    int e;
    int o;
    int movimiento;
    int pc;
    int pf;
    int tc;
    int tf;
    int intentos = 0;
    puts("Ingrese el espacio de su tablero: ");
    scanf("%d", &l);
    

    int fila = l, columna = l;
    //viendo si las dimensiones son positivas
    if (fila <= 0 || columna <= 0) {
        printf("Las dimensiones deben ser siempre numeros y positivas.\nEl juego se termina por querer romperlo\nPdt:esto es para eduardo");
        return 1;
    }

    char a[fila][columna];
    srand(time(NULL));
     pc=(rand()%(l - 2))+1;
     pf=(rand()%(l - 2))+1;
     tc=(rand()%(l - 2))+1;
     tf=(rand()%(l - 2))+1;
    // iniciar la a e imprimirla
    for (int i = 0; i < fila; i++) {
        for (int j = 0; j < columna; j++) {
            // asignar "o" a los bordes de la a
            if (i == 0 || i == fila - 1 || j == 0 || j == columna - 1) {
                a[i][j] = 'o';
            } else{

                a[i][j] = 'x';  // asignar 'o' al interior de la a
                if(pf != tf && pc != tc){
                a[pf][pc] = 'P';
                a[tf][tc] = 'x';
                }
            }
            // a[0][l - 1] = '-';
            // a[l - 1][0] = '-';
            printf("%c ", a[i][j]);
        }
        printf("\n");
    }

    if(a[pf][pc] == a[tf][tc]){
                    puts("Encontraste el tesoro sin moverteÂ¡Que suerte que tenes!");
                    return 0;
                }

    while(intentos <= 50){
        printf("a donde te quieres mover:\n 1 es de Norte, 2 es de Sur, 3 es de Este y 4 es de Oeste:\n");
        scanf("%d", &movimiento);
        printf("\n");
        int pfn = pf;
        int pcn = pc;
        if(movimiento == 1){
            a[pf - 1][pc] = 'P';
            a[pfn][pcn] = 'x';
            pf = pfn - 1;
            pc = pcn;
            if(a[pf][pc] == a[tf][tc]){
                    puts("Encontraste el tesoro");
                    return 0;
            }
        }
        else if(movimiento == 2){
            a[pf + 1][pc] = 'P';
            a[pfn][pcn] = 'x';
            pf = pfn + 1;
            pc = pcn;
            if(a[pf][pc] == a[tf][tc]){
                    puts("Encontraste el tesoro");
                    return 0;
            }
        }
        else if(movimiento == 3){
            a[pf ][pc - 1] = 'P';
            a[pfn][pcn] = 'x';
            pf = pfn;
            pc = pcn - 1;
            if(a[pf][pc] == a[tf][tc]){
                    puts("Encontraste el tesoro");
                    return 0;
            }
        }
        else if(movimiento == 4){
            a[pf][pc + 1] = 'P';
            a[pfn][pcn] = 'x';
            pf = pfn;
            pc = pcn + 1;
            if(a[pf][pc] == a[tf][tc]){
                    puts("Encontraste el tesoro");
                    return 0;
            }
        } 
        else if(movimiento <= 0) {
        printf("El movimiento debe ser siempre el indicado anteriormente.\nEl juego se termina por querer romperl, juega normal");
        return 0;
    }
    else if(movimiento >= 5){
        printf("el numero debe ser el indicado");
    }
             for (int i = 0; i < fila; i++) {
        for (int j = 0; j < columna; j++) {
            printf("%c ", a[i][j]);
            }
            printf("\n");

            if(pf == l - 1){
                puts("agua");
                return 0;
            }
        if(pf == 0){
                puts("agua");
                return 0;
            }
        if(pc == l - 1){
                puts("agua");
                return 0;
            }
        if(pc == 0){
                puts("agua");
                return 0;
            }

        }
        intentos++;
    }
    return 0;
    
}
